# =============================================================================
# Flowise Development Agent — Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# Never commit .env to version control.

# -----------------------------------------------------------------------------
# Flowise Connection (required)
# -----------------------------------------------------------------------------
FLOWISE_API_KEY=your-flowise-api-key
FLOWISE_API_ENDPOINT=http://localhost:3000
FLOWISE_TIMEOUT=120

# Optional Flowise auth (if you set a username/password in Flowise)
FLOWISE_USERNAME=
FLOWISE_PASSWORD=
FLOWISE_PORT=3000

# -----------------------------------------------------------------------------
# Reasoning Engine (required for the agent)
# -----------------------------------------------------------------------------
# Choose: claude (default) or openai
REASONING_ENGINE=claude

# Optional: override the specific model used
# Defaults: claude-sonnet-4-6 (for claude), gpt-4o (for openai)
REASONING_MODEL=

# Sampling temperature 0.0-1.0 (default: 0.2)
# Lower = more deterministic; higher = more creative
REASONING_TEMPERATURE=0.2

# -----------------------------------------------------------------------------
# LLM Provider API Keys
# Provide the key matching your REASONING_ENGINE selection
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=sk-ant-your-key-here
OPENAI_API_KEY=sk-your-key-here

# -----------------------------------------------------------------------------
# Database (required)
# Start Postgres with: docker compose -f docker-compose.postgres.yml up -d
# -----------------------------------------------------------------------------
POSTGRES_DSN=postgresql://postgres:postgres@localhost:5432/flowise_dev_agent

# -----------------------------------------------------------------------------
# Agent Settings
# -----------------------------------------------------------------------------
# Log verbosity: DEBUG | INFO | WARNING | ERROR (default: INFO)
CURSORWISE_LOG_LEVEL=INFO

# Agent API port (default: 8000)
AGENT_API_PORT=8000

# Path to SQLite database for session persistence (default: sessions.db)
SESSIONS_DB_PATH=sessions.db

# Path to SQLite database for the pattern library (default: same as SESSIONS_DB_PATH)
# Set to a separate file to keep patterns isolated from session checkpoints.
PATTERN_DB_PATH=

# -----------------------------------------------------------------------------
# Multiple Flowise Instances (optional — DD-032)
# Allows routing different sessions to different Flowise deployments.
# If not set, the single instance from FLOWISE_API_ENDPOINT is used.
# Format: JSON array of {id, endpoint, api_key} objects.
# The first entry in the array is the default instance.
# -----------------------------------------------------------------------------
# FLOWISE_INSTANCES='[
#   {"id": "dev",  "endpoint": "http://localhost:3000",         "api_key": "key1"},
#   {"id": "prod", "endpoint": "https://flowise.example.com",  "api_key": "key2"}
# ]'
FLOWISE_INSTANCES=

# API key for authenticating requests (leave empty for open access in dev mode)
# When set, all endpoints require: Authorization: Bearer <key>
AGENT_API_KEY=

# -----------------------------------------------------------------------------
# Requirement Clarification (DD-033)
# Set to true to skip the pre-discover clarification step.
# Useful for automated pipelines or tests where requirements are always precise.
# -----------------------------------------------------------------------------
SKIP_CLARIFICATION=false

# -----------------------------------------------------------------------------
# Discover Response Cache (DD-035)
# TTL in seconds for cached discover tool responses (list_nodes, list_marketplace_templates).
# Set to 0 to disable caching. Default: 300 (5 minutes).
# -----------------------------------------------------------------------------
DISCOVER_CACHE_TTL_SECS=300

# -----------------------------------------------------------------------------
# Rate Limiting (DD-036)
# Max new session starts per minute per IP. Set to 0 to disable.
# Applies to POST /sessions and POST /sessions/stream.
# -----------------------------------------------------------------------------
RATE_LIMIT_SESSIONS_PER_MIN=10

# -----------------------------------------------------------------------------
# LangSmith Observability (optional — https://smith.langchain.com)
# -----------------------------------------------------------------------------
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=flowise-dev-agent
